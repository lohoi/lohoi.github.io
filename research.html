<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	<script src="https://vega.github.io/vega/vega.min.js"></script>
	<title>GEMS Lab Research</title>
</head>
<body>
	<h2> Random Subgraph Plots from Blogdata</h2>
	v11
	<div class="embed">
		<div id="view"></div>
	</div>

	<script>
	var vegaJSONSpec = {
		"width": 900,
		"height": 600,
		"padding": 5,

		"data": [{
		  "name": "nodes",
		  "url": "subgraph_nodes.csv",
		  "format": {
		  	"type": "csv",
		  	"parse": {
		  		"coordinate": "number",
		  		"nodeID": "number"
		  	}
		  }
		},{
			"name": "routes",
			"url": "subgraph.csv",
			"format": {
				"type": "csv",
				"parse": {
					"origin": "number",
					"destination": "number"
				}
			},
			"transform": [
				{
				  "type": "lookup",
				  "from": "nodes", "key": "nodeID",
				  "fields": ["origin", "destination"], "as": ["source", "target"]
				},{
				  "type": "filter",
				  "expr": "datum.source && datum.target"
				},{
				  "type": "linkpath",
				  "shape": "line"
				}
			]
		}],
		"signals": [],
		"scales": [
		{
		  "name": "xscale",
		  "type": "band",
		  "nice" : true,
		  "domain": {"data": "nodes", "field": "nodeID"},
		  "range": "width"
		},
		{
		  "name": "yscale",
		  "domain": {"data": "nodes", "field": "nodeID"},
		  "nice": true,
		  "range": "height"
		}],
		"axes": [
			// { "orient": "bottom", "scale": "xscale" },
			// { "orient": "left", "scale": "yscale" }
		],
		"marks": [
			{
			  "type": "symbol",
			  "from": {"data":"nodes"},
			  "encode": {
			    "enter": {
			      "x": {"scale": "xscale", "field": "coordinate", "offset": 1},
			      "width": {"scale": "xscale", "band": 1, "offset": -1},
			      "y": {"scale": "yscale", "field": "coordinate"},
			      "y2": {"scale": "yscale", "value": 0}
			    },
			    "update": {
			      "fill": {"value": "steelblue"}
			    },
			    "hover": {
			      "fill": {"value": "red"}
			    }
			  }
			},{
			  "type": "text",
			  "encode": {
			    "enter": {
			      "align": {"value": "center"},
			      "baseline": {"value": "bottom"},
			      "fill": {"value": "#333"}
			    }
			  }
			},{
				"type": "path",
				"interactive": false,
				"from": {"data": "routes"},
				"properties": {
					"enter": {
					  "path": {"field": "layout_path"},
					  "stroke": {"value": "black"},
					  "strokeOpacity": {"value": 0.20}
					}
				}
			}
		]
	}	// end vegaJSONSpec

	var view = new vega.View(vega.parse(vegaJSONSpec))
  						.renderer('canvas')  // set renderer (canvas or svg)
  						.initialize('#view') // initialize view within parent DOM container
  						.hover()             // enable hover encode set processing
  						.run();   
	</script>
</body>
</html>